{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "STRtr-kit-evidence.schema",
  "title": "STRtr-kit Evidence",
  "description": "Evidence to support pathogenicity of tandem repeat loci in human disease. Each entry describes evidence from a single publication or similar source. There will typically be multiple entries per locus, each describing evidence from different sources.",
  "citation_format": "In free text strings: 'Some text [@doi:12345; @pmid:12345]'. In regular lists: ['doi:12345', 'pmid:12345']",
  "type": "object",
  "properties": {
    "id": {
      "section": "Evidence",
      "title": "Locus",
      "description": "Unique identifier for the locus within STRchive in the form [disease_id]_[gene]. Additional characters may be added to the end of the ID to make it unique within STRchive, e.g. HFG_HOXA13-I, HFG_HOXA13-II.",
      "placeholder": "[disease_id]_[gene]",
      "examples": ["CANVAS_RFC1", "HFG_HOXA13-I", "HFG_HOXA13-II"],
      "type": ["string"],
      "pattern": "^[\\S]+_[\\S]+$"
    },
    "citation": {
      "section": "Evidence",
      "title": "Citation",
      "description": "Citation for the source of the evidence",
      "examples": ["pmid:29507423"],
      "type": ["string"],
      "pattern": "^(?:doi|pmc|pmid|arxiv|isbn|url|mondo|omim|genereviews|malacard|orphanet|stripy|gnomad):.+$"
    },

    "genetic_evidence": {
      "section": "Evidence",
      "title": "Genetic Evidence",
      "description": "One or more pieces of genetic evidence provided in the source",
      "type": "array",
      "uniqueItems": true,
      "items": {
        "title": "",
        "type": "object",
        "properties": {
          "type": {
            "title": "Type",
            "description": "The type(s) of genetic evidence provided in the source",
            "type": ["string", "null"],
            "enum": [
              "probands",
              "allele_effect",
              "method",
              "segregation",
              "case_control"
            ],
            "enum_descriptions": {
              "probands": "Unrelated Probands",
              "allele_effect": "Relationship between allele size and/or motif sequence and phenotype e.g. age of onset and/or severity",
              "method": "Method of predicting Pathogenicity",
              "segregation": "Linkage Region for disease",
              "case_control": "Case-control study"
            }
          },
          "notes": {
            "title": "Notes",
            "description": "Additional notes about the genetic evidence provided in the source including point upgrades/downgrades",
            "examples": [
              "Segregation analysis in 3 affected families with LOD score of 3.5"
            ],
            "type": ["string", "null"],
            "multiline": true
          }
        },
        "required": ["type"],
        "allOf": [
          {
            "if": { "properties": { "type": { "const": "probands" } } },
            "then": {
              "properties": {
                "probands": {
                  "title": "Probands",
                  "description": "Number of probands with the pathogenic expansion reported in the source",
                  "type": ["integer"],
                  "minimum": 0
                },
                "points": {
                  "title": "Points",
                  "description": "Points assigned to this locus based on the genetic evidence provided in the source, according to the STRtr-kit scoring system.",
                  "type": ["number"],
                  "minimum": 0,
                  "maximum": 6,
                  "default": 0.5,
                  "calc": "min(6, {probands} * 0.5)"
                }
              },
              "required": ["probands", "points"]
            }
          }
        ]
      }
    }
  },
  "required": ["id", "citation"]
}
